{"ast":null,"code":"import _slicedToArray from\"C:/Users/User/Documents/2023/CODING DOJO/MERN/Product_Manager/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import axios from'axios';import Container from'react-bootstrap/Container';import Button from'react-bootstrap/Button';import Row from'react-bootstrap/Row';import Col from'react-bootstrap/Col';import{useNavigate,useParams}from'react-router-dom';import ProductForm from'../components/ProductForm';import DeleteProduct from'../components/DeleteProduct';import{jsx as _jsx}from\"react/jsx-runtime\";var Update=function Update(props){var _useParams=useParams(),id=_useParams.id;//this process is identical to the one we used with our Details.js component\nvar _useState=useState({}),_useState2=_slicedToArray(_useState,2),product=_useState2[0],setProduct=_useState2[1];//this process is identical to the one we\nvar _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loaded=_useState6[0],setLoaded=_useState6[1];var navigate=useNavigate();// retrieve the current values for this person so we can fill\n// in the form with what is in the db currently\nvar url='';useEffect(function(){axios.get(url+\"/api/product/\".concat(id)).then(function(res){setProduct(res.data);setLoaded(true);}).catch(function(err){return console.log(err);});},[]);var updateProduct=function updateProduct(productParam){console.log('param',productParam);axios.put(url+\"/api/product/\".concat(id),productParam,{withCredentials:true}).then(function(res){console.log(res);navigate('/home');}).catch(function(err){if(err.response.status===401)navigate('/');else{setErrors(err.response.data.errors);}});};return/*#__PURE__*/_jsx(Container,{className:\"mt-5\",children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:loaded&&/*#__PURE__*/_jsx(ProductForm,{errors:errors,setErrors:setErrors,actionType:'update',onSubmitProp:updateProduct,initialTitle:product.title,initialPrice:product.price,initialDescription:product.description})})})});};export default Update;","map":{"version":3,"names":["React","useEffect","useState","axios","Container","Button","Row","Col","useNavigate","useParams","ProductForm","DeleteProduct","jsx","_jsx","Update","props","_useParams","id","_useState","_useState2","_slicedToArray","product","setProduct","_useState3","_useState4","errors","setErrors","_useState5","_useState6","loaded","setLoaded","navigate","url","get","concat","then","res","data","catch","err","console","log","updateProduct","productParam","put","withCredentials","response","status","className","children","actionType","onSubmitProp","initialTitle","title","initialPrice","price","initialDescription","description"],"sources":["C:/Users/User/Documents/2023/CODING DOJO/MERN/Product_Manager/client/src/components/Update.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport axios from 'axios';\r\nimport Container from 'react-bootstrap/Container';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Row from 'react-bootstrap/Row';\r\nimport Col from 'react-bootstrap/Col';\r\nimport {useNavigate, useParams} from 'react-router-dom';\r\nimport ProductForm from '../components/ProductForm';\r\nimport DeleteProduct from '../components/DeleteProduct';\r\n\r\nconst Update = props => {\r\n  const {id} = useParams (); //this process is identical to the one we used with our Details.js component\r\n  const [product, setProduct] = useState ({}); //this process is identical to the one we\r\n  const [errors, setErrors] = useState ([]);\r\n  const [loaded, setLoaded] = useState (false);\r\n  const navigate = useNavigate ();\r\n  // retrieve the current values for this person so we can fill\r\n  // in the form with what is in the db currently\r\n  const url = '';\r\n  \r\n  useEffect (() => {\r\n    axios\r\n      .get (url + `/api/product/${id}`)\r\n      .then (res => {\r\n        setProduct (res.data);\r\n        setLoaded (true);\r\n      })\r\n      .catch (err => console.log (err));\r\n  }, []);\r\n  const updateProduct = productParam => {\r\n    console.log ('param', productParam);\r\n    axios\r\n      .put (url + `/api/product/${id}`, productParam, {withCredentials: true})\r\n      .then (res => {\r\n        console.log (res);\r\n        navigate ('/home');\r\n      })\r\n      .catch (err => {\r\n        if (err.response.status === 401) navigate ('/');\r\n        else {\r\n          setErrors (err.response.data.errors);\r\n        }\r\n      });\r\n  };\r\n  return (\r\n    <Container className=\"mt-5\">\r\n      <Row>\r\n        <Col>\r\n\r\n          {loaded &&\r\n            <ProductForm\r\n              errors={errors}\r\n              setErrors={setErrors}\r\n              actionType={'update'}\r\n              onSubmitProp={updateProduct}\r\n              initialTitle={product.title}\r\n              initialPrice={product.price}\r\n              initialDescription={product.description}\r\n            />}\r\n        </Col>\r\n\r\n      </Row>\r\n    </Container>\r\n  );\r\n};\r\nexport default Update;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}