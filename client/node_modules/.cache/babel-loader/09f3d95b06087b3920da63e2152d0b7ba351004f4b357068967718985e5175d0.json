{"ast":null,"code":"import _toConsumableArray from\"C:/Users/User/Documents/2023/CODING DOJO/MERN/Product_Manager/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/User/Documents/2023/CODING DOJO/MERN/Product_Manager/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import axios from'axios';// import jwt from 'jsonwebtoken';\n// import Cookies from 'js-cookie';\n// import { useCookies } from 'react-cookie';\nimport{useNavigate}from'react-router-dom';import ProductForm from'../components/ProductForm';import ProductList from'../components/ProductList';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var url='';// const url ='';\nvar Product=function Product(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),productList=_useState2[0],setProductList=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),firstName=_useState6[0],setFirstName=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),lastName=_useState8[0],setLastName=_useState8[1];var navigate=useNavigate();useEffect(function(){axios.get(url+'/api/product',{withCredentials:true}).then(function(res){setProductList(res.data);}).catch(function(err){return console.log(err);});var token=localStorage.getItem('userInfo');if(token){var parsedValue=JSON.parse(token);setFirstName(parsedValue.firstName);setLastName(parsedValue.lastName);console.log('token',parsedValue.firstName);}},[]);var logout=function logout(e){e.preventDefault();axios.post(url+'/api/users/logout',{},{withCredentials:true}).then(function(res){console.log(res.data);localStorage.removeItem('userInfo');navigate('/');}).catch(function(err){console.log(err);});};var createProduct=function createProduct(productParam){axios.post(url+'/api/product',productParam,{withCredentials:true}).then(function(res){setProductList([].concat(_toConsumableArray(productList),[res.data]));})// .catch((err)=>console.log(err))\n.catch(function(err){console.log('this is the error',err.response.status);if(err.response.status===401)navigate('/');else{setErrors(err.response.data.errors);}});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[firstName,\" \",lastName]}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return logout(e);},children:\"Logout\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[firstName?/*#__PURE__*/_jsx(ProductForm,{errors:errors,setErrors:setErrors,actionType:'create',onSubmitProp:createProduct,initialTitle:\"\",initialPrice:\"\",initialDescription:\"\"}):null,/*#__PURE__*/_jsx(ProductList,{productList:productList,setProductList:setProductList})]})]});};export default Product;","map":{"version":3,"names":["React","useEffect","useState","axios","useNavigate","ProductForm","ProductList","jsxs","_jsxs","jsx","_jsx","url","Product","props","_useState","_useState2","_slicedToArray","productList","setProductList","_useState3","_useState4","errors","setErrors","_useState5","_useState6","firstName","setFirstName","_useState7","_useState8","lastName","setLastName","navigate","get","withCredentials","then","res","data","catch","err","console","log","token","localStorage","getItem","parsedValue","JSON","parse","logout","e","preventDefault","post","removeItem","createProduct","productParam","concat","_toConsumableArray","response","status","children","className","onClick","actionType","onSubmitProp","initialTitle","initialPrice","initialDescription"],"sources":["C:/Users/User/Documents/2023/CODING DOJO/MERN/Product_Manager/client/src/views/Product.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport axios from 'axios';\r\n// import jwt from 'jsonwebtoken';\r\n// import Cookies from 'js-cookie';\r\n// import { useCookies } from 'react-cookie';\r\nimport {useNavigate} from 'react-router-dom';\r\nimport ProductForm from '../components/ProductForm';\r\nimport ProductList from '../components/ProductList';\r\n\r\nconst url = '';\r\n// const url ='';\r\n\r\nconst Product = props => {\r\n  const [productList, setProductList] = useState ([]);\r\n  const [errors, setErrors] = useState ([]);\r\n  const [firstName, setFirstName] = useState ('');\r\n  const [lastName, setLastName] = useState ('');\r\n  const navigate = useNavigate ();\r\n\r\n  useEffect (() => {\r\n    axios\r\n      .get (url + '/api/product', {withCredentials: true})\r\n      .then (res => {\r\n        setProductList (res.data);\r\n      })\r\n      .catch (err => console.log (err));\r\n\r\n    const token = localStorage.getItem ('userInfo');\r\n    if (token) {\r\n      const parsedValue = JSON.parse (token);\r\n      setFirstName (parsedValue.firstName);\r\n      setLastName (parsedValue.lastName);\r\n      console.log ('token', parsedValue.firstName);\r\n    }\r\n  }, []);\r\n\r\n  const logout = e => {\r\n    e.preventDefault ();\r\n    axios\r\n      .post (url + '/api/users/logout', {}, {withCredentials: true})\r\n      .then (res => {\r\n        console.log (res.data);\r\n        localStorage.removeItem ('userInfo');\r\n        navigate ('/');\r\n      })\r\n      .catch (err => {\r\n        console.log (err);\r\n      });\r\n  };\r\n\r\n  const createProduct = productParam => {\r\n    axios\r\n      .post (url + '/api/product', productParam, {withCredentials: true})\r\n      .then (res => {\r\n        setProductList ([...productList, res.data]);\r\n      })\r\n      // .catch((err)=>console.log(err))\r\n      .catch (err => {\r\n        console.log ('this is the error', err.response.status);\r\n        if (err.response.status === 401) navigate ('/');\r\n        else {\r\n          setErrors (err.response.data.errors);\r\n        }\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"header\">\r\n        <p>{firstName} {lastName}</p>\r\n        <button onClick={e => logout (e)}>Logout</button>\r\n      </div>\r\n\r\n      <div className=\"container\">\r\n\r\n        {firstName\r\n          ? <ProductForm\r\n              errors={errors}\r\n              setErrors={setErrors}\r\n              actionType={'create'}\r\n              onSubmitProp={createProduct}\r\n              initialTitle=\"\"\r\n              initialPrice=\"\"\r\n              initialDescription=\"\"\r\n            />\r\n          : null}\r\n\r\n        <ProductList\r\n          productList={productList}\r\n          setProductList={setProductList}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default Product;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}