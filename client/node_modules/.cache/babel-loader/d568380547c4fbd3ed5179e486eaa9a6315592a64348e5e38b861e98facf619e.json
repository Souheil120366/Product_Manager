{"ast":null,"code":"import _slicedToArray from\"C:/Users/User/Documents/2023/CODING DOJO/MERN/Product_Manager/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import axios from'axios';import{useNavigate,useParams}from\"react-router-dom\";import ProductForm from'../components/ProductForm';import DeleteButton from'../components/DeleteButton';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Update=function Update(props){var _useParams=useParams(),id=_useParams.id;//this process is identical to the one we used with our Details.js component\nvar _useState=useState({}),_useState2=_slicedToArray(_useState,2),product=_useState2[0],setProduct=_useState2[1];//this process is identical to the one we\nvar _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loaded=_useState6[0],setLoaded=_useState6[1];var navigate=useNavigate();// retrieve the current values for this person so we can fill\n// in the form with what is in the db currently\nvar url=\"\";// const url ='http://localhost:8001';\nuseEffect(function(){axios.get(url+\"/api/product/\".concat(id)).then(function(res){setProduct(res.data);setLoaded(true);}).catch(function(err){return console.log(err);});},[]);var updateProduct=function updateProduct(productParam){axios.put(url+\"/api/product/\".concat(id),productParam).then(function(res){console.log(res);navigate(\"/home\");}).catch(function(err){setErrors(err.response.data.errors);});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Update a Product\"}),loaded&&/*#__PURE__*/_jsx(ProductForm,{errors:errors,setErrors:setErrors,actionType:\"update\",onSubmitProp:updateProduct,initialTitle:product.title,initialPrice:product.price,initialDescription:product.description}),/*#__PURE__*/_jsx(DeleteButton,{productId:product._id,successCallback:function successCallback(){return navigate(\"/home\");}})]});};export default Update;","map":{"version":3,"names":["React","useEffect","useState","axios","useNavigate","useParams","ProductForm","DeleteButton","jsx","_jsx","jsxs","_jsxs","Update","props","_useParams","id","_useState","_useState2","_slicedToArray","product","setProduct","_useState3","_useState4","errors","setErrors","_useState5","_useState6","loaded","setLoaded","navigate","url","get","concat","then","res","data","catch","err","console","log","updateProduct","productParam","put","response","children","actionType","onSubmitProp","initialTitle","title","initialPrice","price","initialDescription","description","productId","_id","successCallback"],"sources":["C:/Users/User/Documents/2023/CODING DOJO/MERN/Product_Manager/client/src/components/Update.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport axios from 'axios';\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport ProductForm from '../components/ProductForm';\r\nimport DeleteButton from '../components/DeleteButton';\r\n\r\nconst Update = (props) => {\r\n    const { id } = useParams(); //this process is identical to the one we used with our Details.js component\r\n    const [product, setProduct] = useState({}); //this process is identical to the one we\r\n    const [errors, setErrors] = useState([]);\r\n    const [loaded, setLoaded] = useState(false);\r\n    const navigate = useNavigate();\r\n    // retrieve the current values for this person so we can fill\r\n    // in the form with what is in the db currently\r\n    const url=\"\";\r\n    // const url ='http://localhost:8001';\r\n    useEffect(() => {\r\n        axios.get(url+`/api/product/${id}`)\r\n            .then(res => { \r\n                setProduct(res.data)\r\n                setLoaded(true);\r\n             })\r\n            .catch(err => console.log(err))\r\n    }, [])\r\n    const updateProduct = productParam => {\r\n        \r\n        axios.put(url+`/api/product/${id}`,productParam)\r\n            .then(res => {\r\n                console.log(res);\r\n                navigate(\"/home\"); \r\n            })\r\n            .catch(err=>{\r\n                setErrors(err.response.data.errors);\r\n            })\r\n    }\r\n    return (\r\n        <div>\r\n            <h1>Update a Product</h1>\r\n            {\r\n            loaded && <ProductForm errors={errors} setErrors={setErrors} actionType={\"update\"} onSubmitProp={updateProduct} initialTitle={product.title} initialPrice={product.price}\r\n            initialDescription={product.description}\r\n            />\r\n            }\r\n            <DeleteButton productId={product._id} successCallback={() => navigate(\"/home\")} />\r\n        </div>\r\n    )\r\n}\r\nexport default Update;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}